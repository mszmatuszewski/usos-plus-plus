<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>USOS++</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <link href="/webjars/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"
          type="text/css"/>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.css' rel='stylesheet'/>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.min.js'></script>

    <script language="JavaScript" th:inline="javascript">
        /*<![CDATA[*/
        var eventList = /*[[${calendarClasses}]]*/ [];

        console.log(eventList);

        $(function () {
            $('#calendar').fullCalendar({
                height: 675,
                defaultView: "agendaWeek",
                minTime: "07:00:00",
                maxTime: "21:00:00",
                weekends: false,
                header: false,
                allDaySlot: false,
                columnHeaderFormat: "ddd",
                slotLabelFormat: "HH:mm",
                timeFormat: "HH:mm",
                slotEventOverlap: false,
                events: eventList
            })
        });
        /*]]>*/
    </script>
</head>
<body>

<div th:replace="layout :: header">
    NAVBAR PLACEHOLDER
</div>

<div class="container">

    <div class="starter-template" style="width: 90%">
        <table>
            <tr>
                <td>
                    <div id="calendar"></div>
                </td>
                <td>
                    <form method="get" th:action="@{/schedule/retrieve}" th:object="${payload}">
                        <div th:each="subject, subjectStat : *{subjects}">
                            <span
                                    th:text="*{subjects[__${subjectStat.index}__].name} + ' (' + *{subjects[__${subjectStat.index}__].type.toString().toLowerCase()} + ')'"></span>
                            <select onchange="this.form.submit()"
                                    th:field="*{subjects[__${subjectStat.index}__].occurences}">
                                <option th:each="occurence : *{subjects[__${subjectStat.index}__].occurences}"
                                        th:text="${occurence.display()}" th:value="${occurence.id}"
                                ></option>
                            </select>
                            <br/>
                        </div>
                        <br/>
                    </form>

                </td>
            </tr>
        </table>
    </div>

</div>
<!-- /.container -->

<script src="/webjars/bootstrap/3.3.7/js/bootstrap.min.js"
        type="text/javascript"></script>

</body>
</html>
